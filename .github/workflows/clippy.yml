name: Clippy

on:
  pull_request:

jobs:
  clippy:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout Main Repository
      uses: actions/checkout@v4

    - name: Configure SSH for Private Repositories
      run: |
        mkdir -p ~/.ssh
        echo "${{ secrets.SECRET }}" > ~/.ssh/id_rsa
        chmod 600 ~/.ssh/id_rsa
        ssh-keyscan github.com >> ~/.ssh/known_hosts

    - name: Set up Rust and Clippy
      uses: dtolnay/rust-toolchain@stable
      with:
        components: clippy

    - name: Run Clippy
      run: cargo clippy -- -D warnings
